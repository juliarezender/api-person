Ò&
WC:\Users\julia\Desktop\Treinamento\api-person\ApiPerson\Controllers\PersonController.cs
	namespace 	
	ApiPerson
 
. 
Controllers 
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 
)		 
]		 
public

 

class

 
PersonController

 !
:

" #
ControllerBase

$ 2
{ 
private 
readonly 
ILogger  
<  !
PersonController! 1
>1 2
_logger3 :
;: ;
private 
IPersonService 
_personService -
;- .
public 
PersonController 
(  
ILogger  '
<' (
PersonController( 8
>8 9
logger: @
,@ A
IPersonServiceB P
personServiceQ ^
)^ _
{ 	
_logger 
= 
logger 
; 
_personService 
= 
personService *
;* +
} 	
[ 	
HttpGet	 
] 
public 
IActionResult 
Get  
(  !
)! "
{ 	
var 

listPerson 
= 
_personService +
.+ ,
FindAll, 3
(3 4
)4 5
;5 6
if 
( 

listPerson 
. 
Count  
==! #
$num$ %
)% &
return' -
	NoContent. 7
(7 8
)8 9
;9 :
return 
Ok 
( 

listPerson  
)  !
;! "
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
Get  
(  !
long! %
id& (
)( )
{ 	
var 
person 
= 
_personService '
.' (
FindByID( 0
(0 1
id1 3
)3 4
;4 5
if   
(   
person   
==   
null   
)   
return    &
NotFound  ' /
(  / 0
)  0 1
;  1 2
return!! 
Ok!! 
(!! 
person!! 
)!! 
;!! 
}"" 	
[$$ 	
HttpPost$$	 
]$$ 
public%% 
IActionResult%% 
Post%% !
(%%! "
[%%" #
FromBody%%# +
]%%+ ,
Person%%- 3
person%%4 :
)%%: ;
{&& 	
try'' 
{(( 
if)) 
()) 
person)) 
==)) 
null)) "
)))" #
return))$ *

BadRequest))+ 5
())5 6
)))6 7
;))7 8
return** 
Ok** 
(** 
_personService** (
.**( )
Create**) /
(**/ 0
person**0 6
)**6 7
)**7 8
;**8 9
}++ 
catch-- 
{.. 
return// 
new// 
StatusCodeResult// +
(//+ ,
$num//, /
)/// 0
;//0 1
}00 
}22 	
[44 	
HttpPut44	 
]44 
public55 
IActionResult55 
Put55  
(55  !
[55! "
FromBody55" *
]55* +
Person55, 2
person553 9
)559 :
{66 	
if77 
(77 
person77 
==77 
null77 
)77 
return77  &

BadRequest77' 1
(771 2
)772 3
;773 4
return88 
Ok88 
(88 
_personService88 $
.88$ %
Update88% +
(88+ ,
person88, 2
)882 3
)883 4
;884 5
}99 	
[;; 	

HttpDelete;;	 
(;; 
$str;; 
);; 
];; 
public<< 
IActionResult<< 
Delete<< #
(<<# $
long<<$ (
id<<) +
)<<+ ,
{== 	
var>> 
person>> 
=>> 
_personService>> '
.>>' (
FindByID>>( 0
(>>0 1
id>>1 3
)>>3 4
;>>4 5
if?? 
(?? 
person?? 
==?? 
null?? 
)?? 
return??  &
NotFound??' /
(??/ 0
)??0 1
;??1 2
_personService@@ 
.@@ 
Delete@@ !
(@@! "
id@@" $
)@@$ %
;@@% &
returnAA 
	NoContentAA 
(AA 
)AA 
;AA 
}BB 	
}CC 
}DD ¢
WC:\Users\julia\Desktop\Treinamento\api-person\ApiPerson\Models\Context\PersonContext.cs
	namespace 	
	ApiPerson
 
. 
Models 
. 
Context "
{ 
public 

class 
PersonContext 
:  
	DbContext! *
{ 
public 
PersonContext 
( 
DbContextOptions -
<- .
PersonContext. ;
>; <
options= D
)D E
:F G
baseH L
(L M
optionsM T
)T U
{ 	
}		 	
public

 
PersonContext

 
(

 
)

 
:

  
base

! %
(

% &
)

& '
{ 	
} 	
public 
virtual 
DbSet 
< 
Person #
># $
Persons% ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
} 
} Ž
HC:\Users\julia\Desktop\Treinamento\api-person\ApiPerson\Models\Person.cs
	namespace 	
	ApiPerson
 
. 
Models 
{ 
public 

class 
Person 
{		 
public

 
long

 
Id

 
{

 
get

 
;

 
set

 !
;

! "
}

# $
public 
string 
	FirstName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
LastName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
Address 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Gender 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ™

BC:\Users\julia\Desktop\Treinamento\api-person\ApiPerson\Program.cs
	namespace

 	
	ApiPerson


 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} â(
oC:\Users\julia\Desktop\Treinamento\api-person\ApiPerson\Services\Implementations\PersonServiceImplementation.cs
	namespace 	
	ApiPerson
 
. 
Services 
. 
Implementations ,
{		 
public

 

class

 '
PersonServiceImplementation

 ,
:

- .
IPersonService

/ =
{ 
private 
PersonContext 
_context &
;& '
public '
PersonServiceImplementation *
(* +
PersonContext+ 8
context9 @
)@ A
{ 	
_context 
= 
context 
; 
} 	
public 
Person 
Create 
( 
Person #
person$ *
)* +
{ 	
try 
{ 
_context 
. 
Add 
( 
person #
)# $
;$ %
_context 
. 
SaveChanges $
($ %
)% &
;& '
} 
catch 
( 
	Exception 
) 
{ 
throw 
; 
} 
return 
person 
; 
} 	
public!! 
void!! 
Delete!! 
(!! 
long!! 
id!!  "
)!!" #
{"" 	
var## 
result## 
=## 
_context## !
.##! "
Persons##" )
.##) *
SingleOrDefault##* 9
(##9 :
p##: ;
=>##< >
p##? @
.##@ A
Id##A C
.##C D
Equals##D J
(##J K
id##K M
)##M N
)##N O
;##O P
if%% 
(%% 
result%% 
!=%% 
null%% 
)%% 
{&& 
try'' 
{(( 
_context)) 
.)) 
Remove)) #
())# $
result))$ *
)))* +
;))+ ,
_context** 
.** 
SaveChanges** (
(**( )
)**) *
;*** +
}++ 
catch,, 
(,, 
	Exception,,  
),,  !
{-- 
throw.. 
;.. 
}// 
}00 
}22 	
public44 
List44 
<44 
Person44 
>44 
FindAll44 #
(44# $
)44$ %
{55 	
return66 
_context66 
.66 
Persons66 #
.66# $
ToList66$ *
(66* +
)66+ ,
;66, -
}77 	
public:: 
Person:: 
FindByID:: 
(:: 
long:: #
id::$ &
)::& '
{;; 	
return<< 
_context<< 
.<< 
Persons<< #
.<<# $
SingleOrDefault<<$ 3
(<<3 4
p<<4 5
=><<6 8
p<<9 :
.<<: ;
Id<<; =
.<<= >
Equals<<> D
(<<D E
id<<E G
)<<G H
)<<H I
;<<I J
}== 	
public?? 
Person?? 
Update?? 
(?? 
Person?? #
person??$ *
)??* +
{@@ 	
ifAA 
(AA 
!AA 
ExistsAA 
(AA 
personAA 
.AA 
IdAA !
)AA! "
)AA" #
CreateAA$ *
(AA* +
personAA+ 1
)AA1 2
;AA2 3
varCC 
resultCC 
=CC 
_contextCC !
.CC! "
PersonsCC" )
.CC) *
SingleOrDefaultCC* 9
(CC9 :
pCC: ;
=>CC< >
pCC? @
.CC@ A
IdCCA C
.CCC D
EqualsCCD J
(CCJ K
personCCK Q
.CCQ R
IdCCR T
)CCT U
)CCU V
;CCV W
ifEE 
(EE 
resultEE 
!=EE 
nullEE 
)EE 
{FF 
tryGG 
{HH 
_contextII 
.II 
EntryII "
(II" #
resultII# )
)II) *
.II* +
CurrentValuesII+ 8
.II8 9
	SetValuesII9 B
(IIB C
personIIC I
)III J
;IIJ K
_contextJJ 
.JJ 
SaveChangesJJ (
(JJ( )
)JJ) *
;JJ* +
}KK 
catchLL 
(LL 
	ExceptionLL  
)LL  !
{MM 
throwNN 
;NN 
}OO 
}PP 
returnRR 
personRR 
;RR 
}SS 	
privateUU 
boolUU 
ExistsUU 
(UU 
longUU  
idUU! #
)UU# $
{VV 	
returnWW 
_contextWW 
.WW 
PersonsWW #
.WW# $
AnyWW$ '
(WW' (
pWW( )
=>WW* ,
pWW- .
.WW. /
IdWW/ 1
.WW1 2
EqualsWW2 8
(WW8 9
idWW9 ;
)WW; <
)WW< =
;WW= >
}XX 	
}YY 
}ZZ ’
RC:\Users\julia\Desktop\Treinamento\api-person\ApiPerson\Services\IPersonService.cs
	namespace 	
	ApiPerson
 
. 
Services 
{ 
public 

	interface 
IPersonService #
{ 
Person 
Create 
( 
Person 
person #
)# $
;$ %
Person		 
FindByID		 
(		 
long		 
id		 
)		  
;		  !
List

 
<

 
Person

 
>

 
FindAll

 
(

 
)

 
;

 
Person 
Update 
( 
Person 
person #
)# $
;$ %
void 
Delete 
( 
long 
id 
) 
; 
} 
} ò
BC:\Users\julia\Desktop\Treinamento\api-person\ApiPerson\Startup.cs
	namespace 	
	ApiPerson
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddDbContext !
<! "
PersonContext" /
>/ 0
(0 1
opt1 4
=>5 7
opt8 ;
.; <
UseInMemoryDatabase< O
(O P
$strP Z
)Z [
)[ \
;\ ]
services 
. 
AddControllers #
(# $
)$ %
;% &
services 
. 
	AddScoped 
< 
IPersonService -
,- .'
PersonServiceImplementation/ J
>J K
(K L
)L M
;M N
} 	
public"" 
void"" 
	Configure"" 
("" 
IApplicationBuilder"" 1
app""2 5
,""5 6
IWebHostEnvironment""7 J
env""K N
)""N O
{## 	
if$$ 
($$ 
env$$ 
.$$ 
IsDevelopment$$ !
($$! "
)$$" #
)$$# $
{%% 
app&& 
.&& %
UseDeveloperExceptionPage&& -
(&&- .
)&&. /
;&&/ 0
}'' 
app)) 
.)) 
UseHttpsRedirection)) #
())# $
)))$ %
;))% &
app++ 
.++ 

UseRouting++ 
(++ 
)++ 
;++ 
app-- 
.-- 
UseAuthorization--  
(--  !
)--! "
;--" #
app// 
.// 
UseEndpoints// 
(// 
	endpoints// &
=>//' )
{00 
	endpoints11 
.11 
MapControllers11 (
(11( )
)11) *
;11* +
}22 
)22 
;22 
}33 	
}44 
}55 